"use strict";(self.webpackChunktask_management=self.webpackChunktask_management||[]).push([[36],{8488:(g,c,a)=>{a.d(c,{W:()=>n});var n=(()=>{return(l=n||(n={})).ADMIN="ROLE_ADMIN",l.USER="ROLE_USER",n;var l})()},6036:(g,c,a)=>{a.r(c),a.d(c,{DashboardModule:()=>J});var n=a(8583),l=a(4827),e=a(3018);let Z=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-dashboard"]],decls:21,vars:0,consts:[[1,"shadow","position-relative",2,"z-index","2"],["aria-label","Secondary navigation",1,"nav","justify-content-center"],["routerLink","overview",1,"nav-link"],[1,"fas","fa-bars","me-2"],["routerLink","user",1,"nav-link"],[1,"fas","fa-users","me-2"],["routerLink","task",1,"nav-link"],[1,"fas","fa-tasks","me-2"],["routerLink","account",1,"nav-link"],[1,"far","fa-user","me-2"],[1,"py-5"],[1,"container"],[1,"row"],[1,"col"],["id","nav-tabContent",1,"card","border-0","shadow","h-100"],[1,"card-body"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"nav",1),e.TgZ(2,"a",2),e._UZ(3,"i",3),e._uU(4," Overview"),e.qZA(),e.TgZ(5,"a",4),e._UZ(6,"i",5),e._uU(7," User "),e.qZA(),e.TgZ(8,"a",6),e._UZ(9,"i",7),e._uU(10," Task "),e.qZA(),e.TgZ(11,"a",8),e._UZ(12,"i",9),e._uU(13," Account"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e.TgZ(15,"div",11),e.TgZ(16,"div",12),e.TgZ(17,"div",13),e.TgZ(18,"div",14),e.TgZ(19,"div",15),e._UZ(20,"router-outlet"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA())},directives:[l.yS,l.lC],styles:[".list-group-item[_ngcontent-%COMP%]{padding:1rem;border:none}.list-group-item[_ngcontent-%COMP%] + .list-group-item[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.125)}"]}),r})(),h=(()=>{class r{constructor(){this.title="",this.icon="",this.value=0}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-overview-item"]],inputs:{title:"title",icon:"icon",value:"value"},decls:4,vars:3,consts:[[1,"card","border-0","shadow","text-center","text-light","card-body","bg-primary"],[1,"display-4","mb-3",3,"ngClass"],[1,"h5","fw-bold","text-uppercase",3,"innerText"],[1,"h3","fw-bold",3,"innerText"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"i",1),e._UZ(2,"span",2),e._UZ(3,"span",3),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngClass",o.icon),e.xp6(1),e.Q6J("innerText",o.title),e.xp6(1),e.Q6J("innerText",o.value))},directives:[n.mk],styles:[".display-4[_ngcontent-%COMP%]{font-weight:900!important}"]}),r})(),w=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-overview"]],decls:37,vars:4,consts:[[1,"mb-5"],[1,"fw-bold"],[1,"d-flex"],[1,"d-flex","gap-4"],[1,"py-0","ps-2",2,"border-left","2px solid rgba(0,0,0,0.2)"],[1,"d-block"],[1,"h6","fw-bold"],[1,"d-flex","gap-4","ms-auto","align-items-center"],[1,"group-image"],["src","assets/image/img.jpg","alt",""],[2,"height","20px","border-left","2px solid rgba(0,0,0,0.2)"],[1,"btn","btn-outline-primary"],[1,"fas","fa-plus"],[1,"row","mb-4"],[1,"col"],["title","Policies","icon","fas fa-sticky-note",3,"value"],["title","Claims","icon","fas fa-car-crash",3,"value"],[1,"row"],["title","Appointments","icon","fas fa-calendar-alt",3,"value"],["title","App. completed","icon","fas fa-calendar-check",3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Today, 24 July"),e.qZA(),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"span",5),e._uU(7,"Task requested"),e.qZA(),e.TgZ(8,"span",6),e._uU(9,"10"),e.qZA(),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"span",5),e._uU(12,"Task in progress"),e.qZA(),e.TgZ(13,"span",6),e._uU(14,"6"),e.qZA(),e.qZA(),e.TgZ(15,"div",4),e.TgZ(16,"span",5),e._uU(17,"Task completed"),e.qZA(),e.TgZ(18,"span",6),e._uU(19,"22"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",7),e.TgZ(21,"div",8),e._UZ(22,"img",9),e.qZA(),e._UZ(23,"div",10),e.TgZ(24,"button",11),e._UZ(25,"i",12),e._uU(26," add new user"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",13),e.TgZ(28,"div",14),e._UZ(29,"app-overview-item",15),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"app-overview-item",16),e.qZA(),e.qZA(),e.TgZ(32,"div",17),e.TgZ(33,"div",14),e._UZ(34,"app-overview-item",18),e.qZA(),e.TgZ(35,"div",14),e._UZ(36,"app-overview-item",19),e.qZA(),e.qZA()),2&t&&(e.xp6(29),e.Q6J("value",2),e.xp6(2),e.Q6J("value",2),e.xp6(3),e.Q6J("value",2),e.xp6(2),e.Q6J("value",2))},directives:[h],styles:[""]}),r})();var i=a(665),A=a(1841);let T=(()=>{class r{constructor(t){this.http=t,this.resourceUrl="http://localhost:8080/api/auth"}update(t){return this.http.post(this.resourceUrl+"/me",t,{observe:"response"})}updatePassword(t,o){return this.http.post(this.resourceUrl+"/change-password",{oldPassword:t,newPassword:o},{observe:"response"})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(A.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var p=a(531);function b(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formErrors.firstName.length>0?t.formErrors.firstName[0]:"field is required"," ")}}function U(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formErrors.lastName.length>0?t.formErrors.lastName[0]:"field is required"," ")}}function q(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formErrors.username.length>0?t.formErrors.username[0]:"field is required"," ")}}function P(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formErrors.email.length>0?t.formErrors.email[0]:"field is required"," ")}}function C(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formPasswordErrors.oldPassword.length>0?t.formPasswordErrors.oldPassword[0]:"field is required"," ")}}function N(r,s){if(1&r&&(e.TgZ(0,"div",17),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.formPasswordErrors.newPassword.length>0?t.formPasswordErrors.newPassword[0]:"field is required"," ")}}const u=function(r){return{"is-invalid":r}};let S=(()=>{class r{constructor(t,o,m){this.fb=t,this.accountService=o,this.authService=m,this.isSubmitted=!1,this.isFormPasswordSubmitted=!1,this.form=this.fb.group({firstName:[null,[i.kI.required]],lastName:[null,[i.kI.required]],email:[null,[i.kI.required]],username:[null,[i.kI.required]]}),this.formErrors={firstName:[],lastName:[],email:[],username:[]},this.formPassword=this.fb.group({oldPassword:[null,[i.kI.required]],newPassword:[null,[i.kI.required]]}),this.formPasswordErrors={oldPassword:[],newPassword:[]}}ngOnInit(){this.authService.getAuthenticationState().subscribe(t=>{this.form.setValue({firstName:null==t?void 0:t.firstName,lastName:null==t?void 0:t.lastName,email:null==t?void 0:t.email,username:null==t?void 0:t.username})})}get f(){return this.form.controls}get fp(){return this.formPassword.controls}update(){this.formErrors={firstName:[],lastName:[],email:[],username:[]},this.isSubmitted=!0,!this.form.invalid&&this.accountService.update({firstName:this.form.get("firstName").value,lastName:this.form.get("lastName").value,email:this.form.get("email").value,username:this.form.get("username").value}).subscribe(()=>{alert("info updated successfully")},t=>{this.formErrors=t.error})}updatePassword(){this.formPasswordErrors={oldPassword:[],newPassword:[]},this.isFormPasswordSubmitted=!0,!this.formPassword.invalid&&this.accountService.updatePassword(this.formPassword.get("oldPassword").value,this.formPassword.get("newPassword").value).subscribe(()=>{alert("password updated successfully")},t=>{this.formErrors=t.error})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(i.qu),e.Y36(T),e.Y36(p.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-overview"]],decls:45,vars:26,consts:[[1,"mb-4"],[2,"width","50px"],[1,"row"],[1,"col"],[3,"formGroup","ngSubmit"],["for","userName",1,"form-label"],["formControlName","firstName","type","text","id","firstName","placeholder","Enter a first name",1,"form-control","form-control-lg",3,"ngClass"],["class","text-danger",4,"ngIf"],["formControlName","lastName","type","text","id","lastName","placeholder","Enter a last name",1,"form-control","form-control-lg",3,"ngClass"],["formControlName","username","type","text","id","userName","placeholder","Enter a username",1,"form-control","form-control-lg",3,"ngClass"],["formControlName","email","type","email","id","email","placeholder","Enter an email",1,"form-control","form-control-lg",3,"ngClass"],[1,""],["type","submit",1,"btn","btn-primary","shadow"],["for","oldPassword",1,"form-label"],["formControlName","oldPassword","type","text","id","oldPassword","placeholder","Enter your old password",1,"form-control","form-control-lg",3,"ngClass"],["for","newPassword",1,"form-label"],["formControlName","newPassword","type","text","id","newPassword","placeholder","Enter your new password",1,"form-control","form-control-lg",3,"ngClass"],[1,"text-danger"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2,"Account"),e.qZA(),e._UZ(3,"hr",1),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",3),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return o.update()}),e.TgZ(7,"div",0),e.TgZ(8,"label",5),e._uU(9,"First Name"),e.qZA(),e._UZ(10,"input",6),e.YNc(11,b,2,1,"div",7),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"label",5),e._uU(14,"Last Name"),e.qZA(),e._UZ(15,"input",8),e.YNc(16,U,2,1,"div",7),e.qZA(),e.TgZ(17,"div",0),e.TgZ(18,"label",5),e._uU(19,"Username"),e.qZA(),e._UZ(20,"input",9),e.YNc(21,q,2,1,"div",7),e.qZA(),e.TgZ(22,"div",0),e.TgZ(23,"label",5),e._uU(24,"Email"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,P,2,1,"div",7),e.qZA(),e.TgZ(27,"div",11),e.TgZ(28,"button",12),e._uU(29,"Update"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",3),e.TgZ(31,"form",4),e.NdJ("ngSubmit",function(){return o.updatePassword()}),e.TgZ(32,"div",0),e.TgZ(33,"label",13),e._uU(34,"Old Password"),e.qZA(),e._UZ(35,"input",14),e.YNc(36,C,2,1,"div",7),e.qZA(),e.TgZ(37,"div",0),e.TgZ(38,"label",15),e._uU(39,"New Password"),e.qZA(),e._UZ(40,"input",16),e.YNc(41,N,2,1,"div",7),e.qZA(),e.TgZ(42,"div",11),e.TgZ(43,"button",12),e._uU(44,"Update"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.VKq(14,u,o.isSubmitted&&o.f.firstName.errors)),e.xp6(1),e.Q6J("ngIf",o.isSubmitted&&(o.f.firstName.errors||o.formErrors.username.length>0)),e.xp6(4),e.Q6J("ngClass",e.VKq(16,u,o.isSubmitted&&o.f.lastName.errors)),e.xp6(1),e.Q6J("ngIf",o.isSubmitted&&(o.f.lastName.errors||o.formErrors.lastName.length>0)),e.xp6(4),e.Q6J("ngClass",e.VKq(18,u,o.isSubmitted&&o.f.username.errors)),e.xp6(1),e.Q6J("ngIf",o.isSubmitted&&(o.f.username.errors||o.formErrors.username.length>0)),e.xp6(4),e.Q6J("ngClass",e.VKq(20,u,o.isSubmitted&&o.f.email.errors)),e.xp6(1),e.Q6J("ngIf",o.isSubmitted&&(o.f.email.errors||o.formErrors.email.length>0)),e.xp6(5),e.Q6J("formGroup",o.formPassword),e.xp6(4),e.Q6J("ngClass",e.VKq(22,u,o.isFormPasswordSubmitted&&o.fp.oldPassword.errors)),e.xp6(1),e.Q6J("ngIf",o.isFormPasswordSubmitted&&(o.fp.oldPassword.errors||o.formPasswordErrors.oldPassword.length>0)),e.xp6(4),e.Q6J("ngClass",e.VKq(24,u,o.isFormPasswordSubmitted&&o.fp.newPassword.errors)),e.xp6(1),e.Q6J("ngIf",o.isFormPasswordSubmitted&&(o.fp.newPassword.errors||o.formPasswordErrors.newPassword.length>0)))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,n.mk,n.O5],styles:[""]}),r})();var d=a(8488),y=a(8002),E=a(2274);let f=(()=>{class r{constructor(t,o,m){this.router=t,this.accountService=o,this.stateStorageService=m}canActivate(t,o){return this.accountService.identity().pipe((0,y.U)(m=>{if(m){const v=t.data.authorities;return!(!v||!this.accountService.hasRole(v))||(this.router.navigate(["dashboard/overview"]),!1)}return this.stateStorageService.storeUrl(o.url),this.router.navigate(["login"]),!1}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(l.F0),e.LFG(p.B),e.LFG(E.L))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const x=[{path:"",component:Z,children:[{path:"overview",data:{authorities:[d.W.ADMIN,d.W.USER]},canActivate:[f],component:w},{path:"task",data:{authorities:[d.W.ADMIN,d.W.USER]},canActivate:[f],loadChildren:()=>Promise.all([a.e(339),a.e(385)]).then(a.bind(a,1385)).then(r=>r.TaskModule)},{path:"user",data:{authorities:[d.W.ADMIN]},canActivate:[f],loadChildren:()=>Promise.all([a.e(339),a.e(930)]).then(a.bind(a,8930)).then(r=>r.UserModule)},{path:"account",data:{authorities:[d.W.ADMIN,d.W.USER]},canActivate:[f],component:S}]}];let I=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[l.Bz.forChild(x)],l.Bz]}),r})(),J=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[n.ez,l.Bz,I,i.UX]]}),r})()}}]);